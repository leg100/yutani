{
  "resource": {
    "aws_security_group": {
      "bastion": {
        "name": "bastion-prod",
        "description": "Security group for the bastion instance",
        "vpc_id": "${module.vpc.aws_vpc.main.id}"
      }
    },
    "aws_security_group_rule": {
      "bastion": {
        "type": "ingress",
        "security_group_id": "${module.bastion.aws_security_group.bastion.id}",
        "cidr_blocks": null,
        "from_port": 22,
        "to_port": 22,
        "protocol": "tcp"
      }
    },
    "aws_instance": {
      "bastion": {
        "instance_type": "t2.small",
        "vpc_security_group_ids": [
          "${module.bastion.aws_security_group.bastion.id}"
        ],
        "ami": null,
        "key_name": "louisgarman",
        "tags": {
          "Name": [
            "myproject",
            "bastion",
            "prod"
          ],
          "Role": "bastion",
          "Environment": "prod"
        }
      }
    }
  }
}